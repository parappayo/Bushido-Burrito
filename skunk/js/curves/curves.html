<html>

<head>
<script>

function Range(start, end)
{
	this.start = start;
	this.end = end;
}

Range.prototype.delta = function ()
{
	return this.end - this.start;
}

function ParametricFunction(x, y)
{
	this.x = x;
	this.y = y;
}

ParametricFunction.prototype.generateCurve = function (range, stepCount)
{
	var result = [];

	var t = range.start;
	var dt = range.delta() / stepCount;
	var previousPoint = { x: this.x(t), y: this.y(t) };

	while (stepCount > 0) {
		stepCount--;

		t += dt;
		var point = {
			x: previousPoint.x + this.x(t),
			y: previousPoint.y + this.y(t)
		};

		result.push(point);
		previousPoint = point;
	}

	return result;
}

function scaleCurve(points, scale)
{
	points.forEach((currentValue, index, array) => {
		points[index].x = currentValue.x * scale;
		points[index].y = currentValue.y * scale;
	});
}

function plotCurve(canvasContext2D, points)
{
	if (points.length < 2) { return; }

	canvasContext2D.beginPath();
	canvasContext2D.moveTo(points[0].x, points[0].y);

	points.forEach((currentValue, index, array) => {
		canvasContext2D.lineTo(currentValue.x, currentValue.y);
	});

	canvasContext2D.stroke();
}

function plotEulerSpiral(canvasContext2D, range, stepCount, scale)
{
	var dt = range.delta() / stepCount;

	var eulerSpiralFunction = new ParametricFunction(
		(t) => { return Math.cos(t * t) * dt },
		(t) => { return Math.sin(t * t) * dt }
	);

	var points = eulerSpiralFunction.generateCurve(range, stepCount);
	scaleCurve(points, scale);
	plotCurve(canvasContext2D, points);
}

function handleOnLoad()
{
	var canvasContext2D = document.getElementById("curveCanvas").getContext("2d");
	canvasContext2D.lineWidth = 0.5;

	var stepCount = 10000;
	var scale = 800;

	plotEulerSpiral(canvasContext2D, new Range(0, 20), stepCount, scale);
}

</script>
</head>

<body onload="handleOnLoad()">

<canvas id="curveCanvas" width="1200" height="1200" />

</body>

</html>
